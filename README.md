# GirlsFrontLine

#### 介绍
少女前线8-1n双zas炸狗与收后勤脚本

#### 1.炸狗脚本使用说明
本脚本基于airtest编写

使用的MuMu模拟器，分辨率1440*810

系统需要安装有 `python` ，我的版本 `Python 3.8.5`

在项目目录使用如下命令安装需要的依赖库
`pip install -r requirements.txt`

启动脚本命令： `python 81n炸狗v4.0.air/81n炸狗v4.0.py`

##### 1.1 队伍配置

第一队放老板和zas

第二队单独一个zas

注意两个zas都需要满足条件，具体数值要求可到nga或者贴吧查找

zas推荐放在9号位

##### 1.2 注意点

让一队的zas和二队的zas先磨一点血，以保证在仓库中的受损排序是第一和第二位
先保证一队中的zas空弹药，二队的满弹药，因为进入地图后会将一队的zas和二队的zas互换(不换也可以，脚本会帮忙补弹药换位的)
换完就开始部署梯队开打了

~~确保游戏处于主界面再运行本脚本，否则会报错找不到位置~~

若游戏不在主界面，则会重启

##### 1.3 其它问题
目前运行比较正常，脚本中部分功能没有写完因此没有调用

功能对目前的我来说是够用了，如无问题不会再改了(我懒...)

经过了多次的版本更改，打一轮终于不再是动不动就300多秒了(启动脚本的第一把除外)，目前过一遍炸狗流程平均在250s左右(这微妙的数字)，为了稳定与提高脚本容错，有些等待时间是不能省略的。启动脚本后模拟器可以最小化，完全不影响你电脑干其他事。

我看有人写的打一轮只要200s左右，但是出点问题就要重启游戏进行复位(而且模拟器必须保持在最上层，会操作你的鼠标...也就是脚本启动后，你的电脑也不能干其他事了)，个人不喜欢这种方式。

注释写的比较详细(啰嗦)，有兴趣且有能力的可以自己修改以符合自身的需求。



#### 3.收后勤脚本使用说明
收后勤脚本启动后，需要游戏保持在主界面不要动。脚本每分钟会判断一次后勤队伍是否归来，脚本检测到后勤归来，收了奖励后会自动重新派遣。



#### 4.脚本配置

脚本默认关闭日志生成，若需要开启日志生成，将脚本第14行 `logdir=False` 修改为 `logdir=True`  即可，日志默认生成在脚本根目录的 `log` 文件夹下。

有了日志才能生成报告，命令格式如下：

```
airtest report 脚本目录 --log_root 日志目录 --outfile 存放报告目录/log.html --lang zh
```

例如我的：

```
airtest report F:/项目相关/AirTest/81n炸狗v4.0.air --log_root F:/项目相关/AirTest/81n炸狗v4.0.air/log --outfile F:/项目相关/AirTest/81n炸狗v4.0.air/log/log.html --lang zh
```

这样，我就可以打开 `F:/项目相关/AirTest/81n炸狗v4.0.air/log/log.html` 文件查看运行报告了。



#### 5.注意

如果有些图片识别不出来，可能需要你重新截图，同一个脚本同样的代码同样的一张图。不同的airtest版本识别会有差别，总之没问题就不管，有报错识别不了就看看是不是。

如果脚本莫名其妙不停的重启游戏应用，多半就是有问题的，注释掉第 `453行` 的 `@bomb_dog_retry` 装饰器再调试，因为该装饰器是用来捕获异常的，脚本出错不会终止运行，而是会重启游戏重跑脚本。

要调试看报错就注释掉装饰器准没问题。确认脚本没问题了再把装饰器加回去即可。

